--DROP TABLE public.student_class;
--DROP TABLE public.theme_class;
--DROP TABLE public.salary;
--DROP TABLE public."class";
--DROP TABLE public.teacher;
--DROP TABLE public."mark";
--DROP TABLE public.student;
--DROP TABLE public."role";
--DROP TABLE public.theme;


-- public."mark" definition
-- Drop mark
-- DROP TABLE public."mark";

CREATE TABLE public."mark" (
	id serial4 NOT NULL,
	mark int4 NOT null,
	"date" timestamp NOT NULL,
	student_id int4 NULL,
	theme_id int4 NULL
--	CONSTRAINT mark_pkey PRIMARY KEY (id)
);

-- public.theme definition
-- Drop table
-- DROP TABLE public.theme;

CREATE TABLE public.theme (
	id serial4 NOT NULL,
	title varchar(50) NULL
--	CONSTRAINT theme_pkey PRIMARY KEY (id)
);

-- public.student_theme_class definition
-- Drop table
-- DROP TABLE public.student_theme_class;

CREATE TABLE public.theme_class (
	theme_id int4 NULL,
	class_id int4 null
);

-- public.student_theme_class definition
-- Drop table
-- DROP TABLE public.student_theme_class;

CREATE TABLE public.student_class (
	student_id int4 NULL,
	class_id int4 null
);


-- public.student definition
-- Drop table
-- DROP TABLE public.student;

CREATE TABLE public.student (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL,
	login varchar(50) NOT NULL,
	"password" varchar(50) NOT NULL,
	role_id int4 NULL
--	CONSTRAINT student_pkey PRIMARY KEY (id)
);


-- public.teacher definition
-- Drop table
-- DROP TABLE public.teacher;

CREATE TABLE public.teacher (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL,
	login varchar(50) NOT NULL,
	"password" varchar(50) NOT NULL,
	role_id int4 NULL
--	CONSTRAINT teacher_pkey PRIMARY KEY (id)
);


-- public.salary definition
-- Drop table
-- DROP TABLE public.salary;

CREATE TABLE public.salary (
	id serial4 NOT NULL,
	salary numeric(4) NOT NULL,
	"date" timestamp NOT NULL,
	teacher_id int4 NULL
--	CONSTRAINT salary_pkey PRIMARY KEY (id)
);


-- public."role" definition
-- Drop table
-- DROP TABLE public."role";

CREATE TABLE public."role" (
	id serial4 NOT NULL,
	title varchar(50) NOT NULL
--	CONSTRAINT role_pkey PRIMAKEY (id)
);


-- public."class" definition
-- Drop table
-- DROP TABLE public."class";

CREATE TABLE public."class" (
	id serial4 NOT NULL,
	title varchar(50) NOT NULL,
	teacher_id int4 NULL
--	CONSTRAINT group_pkey PRIMARY KEY (id)
);


-- public."class" foreign keys
--
--ALTER TABLE public."class" ADD CONSTRAINT group_teacher_fk FOREIGN KEY (teacher_id) REFERENCES public.teacher(id);
--
-- public.student_class foreign keys
--
--ALTER TABLE public.student_class ADD CONSTRAINT student_class_class_id_fkey FOREIGN KEY (class_id) REFERENCES public."class"(id) on delete cascade;
--ALTER TABLE public.student_class ADD CONSTRAINT student_class_student_id_fkey FOREIGN KEY (student_id) REFERENCES public.student(id) on delete cascade;
--
--ALTER TABLE public.theme_class ADD CONSTRAINT theme_class_class_id_fkey FOREIGN KEY (class_id) REFERENCES public."class"(id);
--ALTER TABLE public.theme_class ADD CONSTRAINT theme_class_theme_id_fkey FOREIGN KEY (theme_id) REFERENCES public.theme(id);
--
--
--ALTER TABLE public.mark ADD CONSTRAINT student_mark_id_fkey FOREIGN KEY (student_id) REFERENCES public.student(id) on delete cascade;
--ALTER TABLE public.mark ADD CONSTRAINT theme_mark_id_fkey FOREIGN KEY (theme_id) REFERENCES public.theme(id);
--
-- public.student foreign keys
--
--ALTER TABLE public.student ADD CONSTRAINT student_role_id_fkey FOREIGN KEY (role_id) REFERENCES public."role"(id);
--
-- public.teacher foreign keys
--
--ALTER TABLE public.teacher ADD CONSTRAINT teacher_role_id_fkey FOREIGN KEY (role_id) REFERENCES public."role"(id);
--
-- public.salary foreign keys
--
--ALTER TABLE public.salary ADD CONSTRAINT salary_teacher_fk FOREIGN KEY (teacher_id) REFERENCES public.teacher(id) on delete cascade;



--select s.id id, s.name title, s.login log, s.password pass, s.role_id role_id, m.mark, th.title
-- from student s
-- join student_class sc on s.id = sc.student_id
-- join class c on sc.class_id = c.id
-- join theme_class tc on c.id = tc.class_id
-- join theme th on tc.theme_id = th.id
-- join mark m on s.id = m.student_id
-- ;

